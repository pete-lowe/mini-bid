<!DOCTYPE html>

<html>
<head>
  <title>app.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../../../../../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="app.html">
                  /Users/petelowe/Documents/cc/MiniBid/app.js
                </a>
              
                
                <a class="source" href="swagger.html">
                  /Users/petelowe/Documents/cc/MiniBid/swagger.js
                </a>
              
                
                <a class="source" href="verifyToken.html">
                  /Users/petelowe/Documents/cc/MiniBid/verifyToken.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>app.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>)
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>)
<span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;dotenv/config&#x27;</span>)</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <p>const sgMail = require(‘@sendgrid/mail’)
sgMail.setApiKey(process.env.SENDGRID_API_KEY)</p>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <p>const msg = {
    to: ‘<a href="mailto:&#112;&#x65;&#116;&#x65;&#109;&#108;&#111;&#x77;&#x65;&#x40;&#103;&#x6d;&#97;&#x69;&#108;&#x2e;&#x63;&#x6f;&#x6d;">&#112;&#x65;&#116;&#x65;&#109;&#108;&#111;&#x77;&#x65;&#x40;&#103;&#x6d;&#97;&#x69;&#108;&#x2e;&#x63;&#x6f;&#x6d;</a>‘, // Change to your recipient
    from: ‘<a href="mailto:&#x70;&#x6c;&#x6f;&#x77;&#x65;&#x30;&#51;&#x40;&#x73;&#116;&#117;&#x64;&#x65;&#110;&#x74;&#x2e;&#x62;&#98;&#x6b;&#x2e;&#97;&#99;&#x2e;&#x75;&#x6b;">&#x70;&#x6c;&#x6f;&#x77;&#x65;&#x30;&#51;&#x40;&#x73;&#116;&#117;&#x64;&#x65;&#110;&#x74;&#x2e;&#x62;&#98;&#x6b;&#x2e;&#97;&#99;&#x2e;&#x75;&#x6b;</a>‘, // Change to your verified sender
    subject: ‘Welcome to MiniBid’,
    text: ‘This is pete test email’,
    html: `<form action="http://localhost:3000/api/users/login" method="POST">
    <button>Submit</button></p>
</form>`
  }

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-keyword">const</span> swaggerUi = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;swagger-ui-express&#x27;</span>)
<span class="hljs-keyword">const</span> swaggerFile = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./swagger_output.json&#x27;</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;/doc&#x27;</span>, swaggerUi.<span class="hljs-property">serve</span>, swaggerUi.<span class="hljs-title function_">setup</span>(swaggerFile))

<span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>)
<span class="hljs-keyword">const</span> bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;body-parser&#x27;</span>)

app.<span class="hljs-title function_">use</span>(bodyParser.<span class="hljs-title function_">json</span>())

<span class="hljs-keyword">const</span> authRoute = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./routes/auth&#x27;</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;/api/users&#x27;</span>, authRoute)

<span class="hljs-keyword">const</span> itemsRoute = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./routes/items&#x27;</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;/api/items&#x27;</span>, itemsRoute)

<span class="hljs-keyword">const</span> usersRoute = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./routes/users&#x27;</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;/api/users&#x27;</span>, usersRoute)

<span class="hljs-keyword">const</span> auctionsRoute = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./routes/auctions&#x27;</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;/api/auctions&#x27;</span>, auctionsRoute)

<span class="hljs-keyword">const</span> bidRoute = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./routes/bid&#x27;</span>)
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;/api/bid&#x27;</span>, bidRoute)

<span class="hljs-keyword">const</span> auth = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./verifyToken&#x27;</span>)

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">req,res</span>)=&gt;</span>{
    res.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Welcome to MiniBid&#x27;</span>)
    
})


mongoose.<span class="hljs-title function_">connect</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_CONNECTOR</span>, <span class="hljs-function">()=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Your mongoDB connector is on...&#x27;</span>)
})


app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-function">()=&gt;</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Your server is up and running...&#x27;</span>)
})</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
